--- ../work/decompile-bb26c12b/net/minecraft/server/DispenseBehaviorBonemeal.java	2014-11-27 08:59:46.633422146 +1100
+++ src/main/java/net/minecraft/server/DispenseBehaviorBonemeal.java	2014-11-27 08:42:10.120850973 +1100
@@ -1,5 +1,10 @@
 package net.minecraft.server;
 
+// CraftBukkit start
+import org.bukkit.craftbukkit.inventory.CraftItemStack;
+import org.bukkit.event.block.BlockDispenseEvent;
+// CraftBukkit end
+
 final class DispenseBehaviorBonemeal extends DispenseBehaviorItem {
 
     private boolean b = true;
@@ -10,6 +15,30 @@
         if (EnumColor.WHITE == EnumColor.fromInvColorIndex(itemstack.getData())) {
             World world = isourceblock.i();
             BlockPosition blockposition = isourceblock.getBlockPosition().shift(BlockDispenser.b(isourceblock.f()));
+                       
+            // CraftBukkit start
+            org.bukkit.block.Block block = world.getWorld().getBlockAt(isourceblock.getBlockPosition().getX(), isourceblock.getBlockPosition().getY(), isourceblock.getBlockPosition().getZ());
+            CraftItemStack craftItem = CraftItemStack.asNewCraftStack(itemstack.getItem());
+
+            BlockDispenseEvent event = new BlockDispenseEvent(block, craftItem.clone(), new org.bukkit.util.Vector(0, 0, 0));
+            if (!BlockDispenser.eventFired) {
+                world.getServer().getPluginManager().callEvent(event);
+            }
+
+            if (event.isCancelled()) {
+                return itemstack;
+            }
+
+            if (!event.getItem().equals(craftItem)) {
+                // Chain to handler for new item
+                ItemStack eventStack = CraftItemStack.asNMSCopy(event.getItem());
+                IDispenseBehavior idispensebehavior = (IDispenseBehavior) BlockDispenser.M.get(eventStack.getItem());
+                if (idispensebehavior != IDispenseBehavior.a && idispensebehavior != this) {
+                    idispensebehavior.a(isourceblock, eventStack);
+                    return itemstack;
+                }
+            }
+            // CraftBukkit end
 
             if (ItemDye.a(itemstack, world, blockposition)) {
                 if (!world.isStatic) {
