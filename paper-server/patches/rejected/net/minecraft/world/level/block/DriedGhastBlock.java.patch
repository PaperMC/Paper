From c8366d72279d30331daff185f7b263159a86ff4d Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 06:37:42 -0700
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/level/block/DriedGhastBlock.java b/net/minecraft/world/level/block/DriedGhastBlock.java
index e649de498d4989055250dd0e53aa410b9c525311..e7dbc14cce1d0ec3f410ae7ebbb4dc47301b5176 100644
--- a/net/minecraft/world/level/block/DriedGhastBlock.java
+++ b/net/minecraft/world/level/block/DriedGhastBlock.java
@@ -104,10 +104,20 @@ public class DriedGhastBlock extends HorizontalDirectionalBlock implements Simpl
 
     private void tickWaterlogged(BlockState state, ServerLevel level, BlockPos pos, RandomSource random) {
         if (!this.isReadyToSpawn(state)) {
+            // Paper start - Call BlockGrowEvent
+            if (!org.bukkit.craftbukkit.event.CraftEventFactory.handleBlockGrowEvent(level, pos, state.setValue(HYDRATION_LEVEL, this.getHydrationLevel(state) + 1), Block.UPDATE_CLIENTS)) {
+                return;
+            }
+            // Paper end - Call BlockGrowEvent
             level.playSound(null, pos, SoundEvents.DRIED_GHAST_TRANSITION, SoundSource.BLOCKS, 1.0F, 1.0F);
-            level.setBlock(pos, state.setValue(HYDRATION_LEVEL, this.getHydrationLevel(state) + 1), Block.UPDATE_CLIENTS);
+            // level.setBlock(pos, state.setValue(HYDRATION_LEVEL, this.getHydrationLevel(state) + 1), Block.UPDATE_CLIENTS); // Paper - handled above
             level.gameEvent(GameEvent.BLOCK_CHANGE, pos, GameEvent.Context.of(state));
         } else {
+            // Paper start - Call BlockFadeEvent
+            if (org.bukkit.craftbukkit.event.CraftEventFactory.callBlockFadeEvent(level, pos, state.getFluidState().createLegacyBlock()).isCancelled()) {
+                return;
+            }
+            // Paper end - Call BlockFadeEvent
             this.spawnGhastling(level, pos, state);
         }
     }
@@ -121,7 +131,7 @@ public class DriedGhastBlock extends HorizontalDirectionalBlock implements Simpl
             float yRot = Direction.getYRot(state.getValue(FACING));
             happyGhast.setYHeadRot(yRot);
             happyGhast.snapTo(bottomCenter.x(), bottomCenter.y(), bottomCenter.z(), yRot, 0.0F);
-            level.addFreshEntity(happyGhast);
+            level.addFreshEntity(happyGhast, org.bukkit.event.entity.CreatureSpawnEvent.SpawnReason.REHYDRATION); // Paper - spawn reason
             level.playSound(null, happyGhast, SoundEvents.GHASTLING_SPAWN, SoundSource.BLOCKS, 1.0F, 1.0F);
         }
     }
