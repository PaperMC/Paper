From c8366d72279d30331daff185f7b263159a86ff4d Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 06:37:42 -0700
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/effect/HealOrHarmMobEffect.java b/net/minecraft/world/effect/HealOrHarmMobEffect.java
index 111e47a9263a32fed73f8644790d2739a5ad2b60..a97e9d142306ebe6c80e449a86cdc85b38c7e387 100644
--- a/net/minecraft/world/effect/HealOrHarmMobEffect.java
+++ b/net/minecraft/world/effect/HealOrHarmMobEffect.java
@@ -16,7 +16,7 @@ class HealOrHarmMobEffect extends InstantenousMobEffect {
     @Override
     public boolean applyEffectTick(ServerLevel level, LivingEntity entity, int amplifier) {
         if (this.isHarm == entity.isInvertedHealAndHarm()) {
-            entity.heal(Math.max(4 << amplifier, 0));
+            entity.heal(Math.max(4 << amplifier, 0), org.bukkit.event.entity.EntityRegainHealthEvent.RegainReason.MAGIC); // CraftBukkit
         } else {
             entity.hurtServer(level, entity.damageSources().magic(), 6 << amplifier);
         }
@@ -28,9 +28,10 @@ class HealOrHarmMobEffect extends InstantenousMobEffect {
     public void applyInstantenousEffect(
         ServerLevel level, @Nullable Entity source, @Nullable Entity indirectSource, LivingEntity entity, int amplifier, double health
     ) {
+        if (!new io.papermc.paper.event.entity.EntityEffectTickEvent(entity.getBukkitLivingEntity(), org.bukkit.craftbukkit.potion.CraftPotionEffectType.minecraftToBukkit(this), amplifier).callEvent()) { return; } // Paper - Add EntityEffectTickEvent
         if (this.isHarm == entity.isInvertedHealAndHarm()) {
             int i = (int)(health * (4 << amplifier) + 0.5);
-            entity.heal(i);
+            entity.heal(i, org.bukkit.event.entity.EntityRegainHealthEvent.RegainReason.MAGIC); // CraftBukkit
         } else {
             int i = (int)(health * (6 << amplifier) + 0.5);
             if (source == null) {
