From c8366d72279d30331daff185f7b263159a86ff4d Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 06:37:42 -0700
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/server/packs/PathPackResources.java b/net/minecraft/server/packs/PathPackResources.java
index 57a7b29130b918c26b88cfd777c1153270ce7f90..e4ce3cd0b8e6cd82ccb38b6e2381aad87a0ae957 100644
--- a/net/minecraft/server/packs/PathPackResources.java
+++ b/net/minecraft/server/packs/PathPackResources.java
@@ -120,6 +120,12 @@ public class PathPackResources extends AbstractPackResources {
         try (DirectoryStream<Path> directoryStream = Files.newDirectoryStream(path)) {
             for (Path path1 : directoryStream) {
                 String string = path1.getFileName().toString();
+                // Paper start - Improve logging and errors
+                if (!Files.isDirectory(path1)) {
+                    LOGGER.error("Invalid directory entry: {} in {}.", string, this.root, new java.nio.file.NotDirectoryException(string));
+                    continue;
+                }
+                // Paper end - Improve logging and errors
                 if (Identifier.isValidNamespace(string)) {
                     set.add(string);
                 } else {
