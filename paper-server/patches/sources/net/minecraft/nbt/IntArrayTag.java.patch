--- a/net/minecraft/nbt/IntArrayTag.java
+++ b/net/minecraft/nbt/IntArrayTag.java
@@ -23,6 +_,7 @@
         private static int[] readAccounted(final DataInput input, final NbtAccounter accounter) throws IOException {
             accounter.accountBytes(24L);
             int length = input.readInt();
+            com.google.common.base.Preconditions.checkArgument(length < 1 << 24); // Spigot
             accounter.accountBytes(4L, length);
             int[] data = new int[length];
 
