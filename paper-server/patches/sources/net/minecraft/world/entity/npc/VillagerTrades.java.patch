--- a/net/minecraft/world/entity/npc/VillagerTrades.java
+++ b/net/minecraft/world/entity/npc/VillagerTrades.java
@@ -1742,7 +_,8 @@
         @Nullable
         @Override
         public MerchantOffer getOffer(ServerLevel level, Entity trader, RandomSource random) {
-            BlockPos blockPos = level.findNearestMapStructure(this.destination, trader.blockPosition(), 100, true);
+            if (!level.paperConfig().environment.treasureMaps.enabled) return null; // Paper - Configurable cartographer treasure maps
+            BlockPos blockPos = level.findNearestMapStructure(this.destination, trader.blockPosition(), 100, !level.paperConfig().environment.treasureMaps.findAlreadyDiscoveredVillager); // Paper - Configurable cartographer treasure maps
             if (blockPos != null) {
                 ItemStack itemStack = MapItem.create(level, blockPos.getX(), blockPos.getZ(), (byte)2, true, true);
                 MapItem.renderBiomePreviewMap(level, itemStack);
