--- a/net/minecraft/world/entity/ai/Brain.java
+++ b/net/minecraft/world/entity/ai/Brain.java
@@ -208,7 +_,7 @@
 
     public <U> long getTimeUntilExpiry(MemoryModuleType<U> memoryType) {
         Optional<? extends ExpirableValue<?>> optional = this.memories.get(memoryType);
-        return optional.map(ExpirableValue::getTimeToLive).orElse(0L);
+        return optional == null ? 0L : optional.map(ExpirableValue::getTimeToLive).orElse(0L); // Paper
     }
 
     @Deprecated
