--- a/net/minecraft/world/entity/ai/behavior/PoiCompetitorScan.java
+++ b/net/minecraft/world/entity/ai/behavior/PoiCompetitorScan.java
@@ -22,13 +_,23 @@
                         level.getPoiManager()
                             .getType(globalPos.pos())
                             .ifPresent(
-                                poi -> instance.<List<LivingEntity>>get(nearestLivingEntities)
-                                    .stream()
-                                    .filter(entity -> entity instanceof Villager && entity != villager)
-                                    .map(entity -> (Villager)entity)
-                                    .filter(LivingEntity::isAlive)
-                                    .filter(v -> competesForSameJobsite(globalPos, poi, v))
-                                    .reduce(villager, PoiCompetitorScan::selectWinner)
+                                poi -> {
+                                    List<LivingEntity> livingEntities = instance.get(nearestLivingEntities);
+
+                                    Villager winner = villager;
+                                    for (LivingEntity entity : livingEntities) {
+                                        if (!(entity instanceof Villager && entity != villager)) {
+                                            continue;
+                                        }
+                                        if (!entity.isAlive()) {
+                                            continue;
+                                        }
+                                        if (!competesForSameJobsite(globalPos, poi, (Villager) entity)) {
+                                            continue;
+                                        }
+                                        winner = selectWinner(winner, (Villager) entity);
+                                    }
+                                }
                             );
                         return true;
                     }
