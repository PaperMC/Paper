From 3aeeaf31b7a7f888f54e47826e8ec0ddbe65c4bf Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 14:37:42 +0100
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/entity/ai/sensing/Sensor.java b/net/minecraft/world/entity/ai/sensing/Sensor.java
index a56ecf4662cef7d63e77e290d621cfaccb2e55ea..1441f24413b10538e6bdc0f894234d96916c57dc 100644
--- a/net/minecraft/world/entity/ai/sensing/Sensor.java
+++ b/net/minecraft/world/entity/ai/sensing/Sensor.java
@@ -29,8 +29,17 @@ public abstract class Sensor<E extends LivingEntity> {
         .ignoreInvisibilityTesting();
     private final int scanRate;
     private long timeToTick;
+    private final String configKey; // Paper - configurable sensor tick rate and timings
 
     public Sensor(int scanRate) {
+        // Paper start - configurable sensor tick rate and timings
+        String key = io.papermc.paper.util.MappingEnvironment.reobf() ? io.papermc.paper.util.ObfHelper.INSTANCE.deobfClassName(this.getClass().getName()) : this.getClass().getName();
+        int lastSeparator = key.lastIndexOf('.');
+        if (lastSeparator != -1) {
+            key = key.substring(lastSeparator + 1);
+        }
+        this.configKey = key.toLowerCase(java.util.Locale.ROOT);
+        // Paper end
         this.scanRate = scanRate;
         this.timeToTick = RANDOM.nextInt(scanRate);
     }
@@ -41,7 +50,7 @@ public abstract class Sensor<E extends LivingEntity> {
 
     public final void tick(ServerLevel level, E entity) {
         if (--this.timeToTick <= 0L) {
-            this.timeToTick = this.scanRate;
+            this.timeToTick = java.util.Objects.requireNonNullElse(level.paperConfig().tickRates.sensor.get(entity.getType(), this.configKey), this.scanRate); // Paper - configurable sensor tick rate and timings
             this.updateTargetingConditionRanges(entity);
             this.doTick(level, entity);
         }
