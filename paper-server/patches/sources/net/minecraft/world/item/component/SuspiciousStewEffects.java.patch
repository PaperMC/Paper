From 6a0255d07a09045c7b0d3db3fa88ccfd06092226 Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 14:37:42 +0100
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/item/component/SuspiciousStewEffects.java b/net/minecraft/world/item/component/SuspiciousStewEffects.java
index ab73837b62c193aa88491de3d0b946993ab17f9e..23457bba609d3b73b5fc750d55dc6da31d0cfc39 100644
--- a/net/minecraft/world/item/component/SuspiciousStewEffects.java
+++ b/net/minecraft/world/item/component/SuspiciousStewEffects.java
@@ -42,6 +42,15 @@ public record SuspiciousStewEffects(List<SuspiciousStewEffects.Entry> effects) i
         }
     }
 
+    // CraftBukkit start
+    @Override
+    public void cancelUsingItem(net.minecraft.server.level.ServerPlayer player, ItemStack stack, List<net.minecraft.network.protocol.Packet<? super net.minecraft.network.protocol.game.ClientGamePacketListener>> collectedPackets) { // Paper - properly resend entities - collect packets for bundle
+        for (SuspiciousStewEffects.Entry entry : this.effects) {
+            collectedPackets.add(new net.minecraft.network.protocol.game.ClientboundRemoveMobEffectPacket(player.getId(), entry.effect())); // Paper - bundlize packets
+        }
+    }
+    // CraftBukkit end
+
     @Override
     public void addToTooltip(Item.TooltipContext context, Consumer<Component> tooltipAdder, TooltipFlag flag, DataComponentGetter componentGetter) {
         if (flag.isCreative()) {
