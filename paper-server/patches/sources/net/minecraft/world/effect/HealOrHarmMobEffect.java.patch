From 3aeeaf31b7a7f888f54e47826e8ec0ddbe65c4bf Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 14:37:42 +0100
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/effect/HealOrHarmMobEffect.java b/net/minecraft/world/effect/HealOrHarmMobEffect.java
index f0024ad56f495f95d0d6388f844fd9742e165029..9c564abfaefe7ead9abde4338a6722d5d703f9e2 100644
--- a/net/minecraft/world/effect/HealOrHarmMobEffect.java
+++ b/net/minecraft/world/effect/HealOrHarmMobEffect.java
@@ -16,7 +16,7 @@ class HealOrHarmMobEffect extends InstantenousMobEffect {
     @Override
     public boolean applyEffectTick(ServerLevel level, LivingEntity entity, int amplifier) {
         if (this.isHarm == entity.isInvertedHealAndHarm()) {
-            entity.heal(Math.max(4 << amplifier, 0));
+            entity.heal(Math.max(4 << amplifier, 0), org.bukkit.event.entity.EntityRegainHealthEvent.RegainReason.MAGIC); // CraftBukkit
         } else {
             entity.hurtServer(level, entity.damageSources().magic(), 6 << amplifier);
         }
@@ -28,9 +28,10 @@ class HealOrHarmMobEffect extends InstantenousMobEffect {
     public void applyInstantenousEffect(
         ServerLevel level, @Nullable Entity source, @Nullable Entity indirectSource, LivingEntity entity, int amplifier, double health
     ) {
+        if (!new io.papermc.paper.event.entity.EntityEffectTickEvent(entity.getBukkitLivingEntity(), org.bukkit.craftbukkit.potion.CraftPotionEffectType.minecraftToBukkit(this), amplifier).callEvent()) { return; } // Paper - Add EntityEffectTickEvent
         if (this.isHarm == entity.isInvertedHealAndHarm()) {
             int i = (int)(health * (4 << amplifier) + 0.5);
-            entity.heal(i);
+            entity.heal(i, org.bukkit.event.entity.EntityRegainHealthEvent.RegainReason.MAGIC); // CraftBukkit
         } else {
             int i = (int)(health * (6 << amplifier) + 0.5);
             if (source == null) {
