--- a/net/minecraft/world/level/levelgen/FlatLevelSource.java
+++ b/net/minecraft/world/level/levelgen/FlatLevelSource.java
@@ -32,17 +_,22 @@
     private final FlatLevelGeneratorSettings settings;
 
     public FlatLevelSource(final FlatLevelGeneratorSettings generatorSettings) {
-        super(new FixedBiomeSource(generatorSettings.getBiome()), Util.memoize(generatorSettings::adjustGenerationSettings));
+        // CraftBukkit start
+        this(generatorSettings, new FixedBiomeSource(generatorSettings.getBiome()));
+    }
+    public FlatLevelSource(final FlatLevelGeneratorSettings generatorSettings, final net.minecraft.world.level.biome.BiomeSource biomeSource) {
+        super(biomeSource, Util.memoize(generatorSettings::adjustGenerationSettings));
+        // CraftBukkit end
         this.settings = generatorSettings;
     }
 
     @Override
-    public ChunkGeneratorStructureState createState(final HolderLookup<StructureSet> structureSets, final RandomState randomState, final long levelSeed) {
+    public ChunkGeneratorStructureState createState(final HolderLookup<StructureSet> structureSets, final RandomState randomState, final long levelSeed, final org.spigotmc.SpigotWorldConfig conf) { // Spigot
         Stream<Holder<StructureSet>> structures = this.settings
             .structureOverrides()
             .map(HolderSet::stream)
             .orElseGet(() -> structureSets.listElements().map(e -> (Holder<StructureSet>)e));
-        return ChunkGeneratorStructureState.createForFlat(randomState, levelSeed, this.biomeSource, structures);
+        return ChunkGeneratorStructureState.createForFlat(randomState, levelSeed, this.biomeSource, structures, conf); // Spigot
     }
 
     @Override
