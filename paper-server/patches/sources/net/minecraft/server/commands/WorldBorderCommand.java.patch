From 3aeeaf31b7a7f888f54e47826e8ec0ddbe65c4bf Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 14:37:42 +0100
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/server/commands/WorldBorderCommand.java b/net/minecraft/server/commands/WorldBorderCommand.java
index b636744aeaea189f7cf2bbdece46c253e960a66c..e2697b03a0d204eea537e3aaec2dd8fb9f426722 100644
--- a/net/minecraft/server/commands/WorldBorderCommand.java
+++ b/net/minecraft/server/commands/WorldBorderCommand.java
@@ -135,7 +135,7 @@ public class WorldBorderCommand {
     }
 
     private static int setDamageBuffer(CommandSourceStack source, float distance) throws CommandSyntaxException {
-        WorldBorder worldBorder = source.getServer().overworld().getWorldBorder();
+        WorldBorder worldBorder = source.getLevel().getWorldBorder(); // CraftBukkit
         if (worldBorder.getDamageSafeZone() == distance) {
             throw ERROR_SAME_DAMAGE_BUFFER.create();
         } else {
@@ -146,7 +146,7 @@ public class WorldBorderCommand {
     }
 
     private static int setDamageAmount(CommandSourceStack source, float damagePerBlock) throws CommandSyntaxException {
-        WorldBorder worldBorder = source.getServer().overworld().getWorldBorder();
+        WorldBorder worldBorder = source.getLevel().getWorldBorder(); // CraftBukkit
         if (worldBorder.getDamagePerBlock() == damagePerBlock) {
             throw ERROR_SAME_DAMAGE_AMOUNT.create();
         } else {
@@ -159,7 +159,7 @@ public class WorldBorderCommand {
     }
 
     private static int setWarningTime(CommandSourceStack source, int time) throws CommandSyntaxException {
-        WorldBorder worldBorder = source.getServer().overworld().getWorldBorder();
+        WorldBorder worldBorder = source.getLevel().getWorldBorder(); // CraftBukkit
         if (worldBorder.getWarningTime() == time) {
             throw ERROR_SAME_WARNING_TIME.create();
         } else {
@@ -170,7 +170,7 @@ public class WorldBorderCommand {
     }
 
     private static int setWarningDistance(CommandSourceStack source, int distance) throws CommandSyntaxException {
-        WorldBorder worldBorder = source.getServer().overworld().getWorldBorder();
+        WorldBorder worldBorder = source.getLevel().getWorldBorder(); // CraftBukkit
         if (worldBorder.getWarningBlocks() == distance) {
             throw ERROR_SAME_WARNING_DISTANCE.create();
         } else {
@@ -181,13 +181,13 @@ public class WorldBorderCommand {
     }
 
     private static int getSize(CommandSourceStack source) {
-        double size = source.getServer().overworld().getWorldBorder().getSize();
+        double size = source.getLevel().getWorldBorder().getSize(); // CraftBukkit
         source.sendSuccess(() -> Component.translatable("commands.worldborder.get", String.format(Locale.ROOT, "%.0f", size)), false);
         return Mth.floor(size + 0.5);
     }
 
     private static int setCenter(CommandSourceStack source, Vec2 pos) throws CommandSyntaxException {
-        WorldBorder worldBorder = source.getServer().overworld().getWorldBorder();
+        WorldBorder worldBorder = source.getLevel().getWorldBorder(); // CraftBukkit
         if (worldBorder.getCenterX() == pos.x && worldBorder.getCenterZ() == pos.y) {
             throw ERROR_SAME_CENTER.create();
         } else if (!(Math.abs(pos.x) > 2.9999984E7) && !(Math.abs(pos.y) > 2.9999984E7)) {
@@ -205,7 +205,7 @@ public class WorldBorderCommand {
     }
 
     private static int setSize(CommandSourceStack source, double newSize, long time) throws CommandSyntaxException {
-        WorldBorder worldBorder = source.getServer().overworld().getWorldBorder();
+        WorldBorder worldBorder = source.getLevel().getWorldBorder(); // CraftBukkit
         double size = worldBorder.getSize();
         if (size == newSize) {
             throw ERROR_SAME_SIZE.create();
