From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Mickey42302 <bgoodwin423@gmail.com>
Date: Mon, 10 Nov 2025 20:32:11 -0500
Subject: [PATCH] Add spam bypass permission


diff --git a/net/minecraft/server/network/ServerGamePacketListenerImpl.java b/net/minecraft/server/network/ServerGamePacketListenerImpl.java
index ef7d44ea1c1582bbf1d544819825778c414fe40d..9b6d3528fbbe2800d57f8ff8164b586628ee2619 100644
--- a/net/minecraft/server/network/ServerGamePacketListenerImpl.java
+++ b/net/minecraft/server/network/ServerGamePacketListenerImpl.java
@@ -2557,7 +2557,8 @@ public class ServerGamePacketListenerImpl
         if (!this.chatSpamThrottler.isIncrementAndUnderThreshold()
             // CraftBukkit end
             && !this.server.getPlayerList().isOp(this.player.nameAndId())
-            && !this.server.isSingleplayerOwner(this.player.nameAndId())) {
+            && !this.server.isSingleplayerOwner(this.player.nameAndId())
+            && !(java.util.Objects.requireNonNull(this.server.getPlayerList().getPlayer(this.player.getUUID()))).getBukkitEntity().hasPermission("minecraft.spam.bypass")) {
             this.disconnectAsync(Component.translatable("disconnect.spam"), org.bukkit.event.player.PlayerKickEvent.Cause.SPAM); // Paper - kick event cause & add proper async disconnect
         }
     }
