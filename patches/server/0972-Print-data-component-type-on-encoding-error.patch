From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nassim Jahnke <nassim@njahnke.dev>
Date: Thu, 9 May 2024 15:11:34 +0200
Subject: [PATCH] Print data component type on encoding error


diff --git a/src/main/java/net/minecraft/core/component/DataComponentPatch.java b/src/main/java/net/minecraft/core/component/DataComponentPatch.java
index 87dd1f570fd294daf826ef7e6403776e42ed4f61..cee4a0639b3c73e300a8450f8a831cb4a71958ba 100644
--- a/src/main/java/net/minecraft/core/component/DataComponentPatch.java
+++ b/src/main/java/net/minecraft/core/component/DataComponentPatch.java
@@ -144,7 +144,13 @@ public final class DataComponentPatch {
         }
 
         private static <T> void encodeComponent(RegistryFriendlyByteBuf buf, DataComponentType<T> type, Object value) {
+            // Paper start - codec errors of random anonymous classes are useless
+            try {
             type.streamCodec().encode(buf, (T) value); // CraftBukkit - decompile error
+            } catch (final Exception e) {
+                throw new RuntimeException("Error encoding component " + type, e);
+            }
+            // Paper end - codec errors of random anonymous classes are useless
         }
     };
     private static final String REMOVED_PREFIX = "!";
