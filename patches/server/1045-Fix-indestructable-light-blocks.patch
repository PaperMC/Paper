From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Abel van Hulst <abelvanhulst@gmail.com>
Date: Wed, 7 Aug 2024 13:25:55 +0200
Subject: [PATCH] Fix indestructable light blocks


diff --git a/src/main/java/net/minecraft/world/entity/item/ItemEntity.java b/src/main/java/net/minecraft/world/entity/item/ItemEntity.java
index ea0d9335446b20073b9aafb9de453097355db79c..607f1a9802eb0ff4865af4c53f302128a6e6fe02 100644
--- a/src/main/java/net/minecraft/world/entity/item/ItemEntity.java
+++ b/src/main/java/net/minecraft/world/entity/item/ItemEntity.java
@@ -284,7 +284,7 @@ public class ItemEntity extends Entity implements TraceableEntity {
         if (this.isMergable()) {
             // Spigot start
             double radius = this.level().spigotConfig.itemMerge;
-            List<ItemEntity> list = this.level().getEntitiesOfClass(ItemEntity.class, this.getBoundingBox().inflate(radius, radius - 0.5D, radius), (entityitem) -> {
+            List<ItemEntity> list = this.level().getEntitiesOfClass(ItemEntity.class, this.getBoundingBox().inflate(radius, this.level().paperConfig().entities.behavior.onlyMergeItemsHorizontally ? 0 : radius - 0.5D, radius), (entityitem) -> { // Paper - configuration to only merge items horizontally
                 // Spigot end
                 return entityitem != this && entityitem.isMergable();
             });
diff --git a/src/main/java/net/minecraft/world/level/block/Block.java b/src/main/java/net/minecraft/world/level/block/Block.java
index a7108b2be0746aa1f0e574d8c6f5ffad6d369835..29947de9eb6887f2e61516523ff08d8b581b0f53 100644
--- a/src/main/java/net/minecraft/world/level/block/Block.java
+++ b/src/main/java/net/minecraft/world/level/block/Block.java
@@ -92,7 +92,6 @@ public class Block extends BlockBehaviour implements ItemLike {
     public final boolean isDestroyable() {
         return io.papermc.paper.configuration.GlobalConfiguration.get().unsupportedSettings.allowPermanentBlockBreakExploits ||
             this != Blocks.BARRIER &&
-            this != Blocks.LIGHT &&
             this != Blocks.BEDROCK &&
             this != Blocks.END_PORTAL_FRAME &&
             this != Blocks.END_PORTAL &&
